Product Requirements Document PRD 

Overview 

Product Hasan Enterprises Plot Purchase Management System Purpose Implement the end-to-end workflow for plot selection, document submission, milestone-based payments, document issuance, and legal escalation as defined in UC-01..UC-10 and the swimlane diagram. 

Scope 

    Manage purchasers, plots, plot details, service providers, payment schedules, installments, failed payments, and document lifecycle. 

    Support milestone-based document issuance at 10%, 50%, 75%, 100%. 

    Support reminders, meeting scheduling, and legal filing workflow. 

    Provide REST APIs for all operations. 

Actors 

    Purchaser: applies for plots, uploads documents, makes payments. 

    Service Provider: verifies documents, sets up payment schedules, issues documents, files cases. 

    Legal: receives case filings (recorded in system). 

Functional Requirements (mapped to use cases) 

    UC-01 Select Plot and Submit Documents: API to create plot application and upload required documents; system returns required documents list. Acceptance: plot and plot_details created; purchaser linked. 

    UC-09 Setup Payment Schedule: API to create schedule; acceptance: schedule entries persisted and associated with plot. 

    UC-02 Pay in accordance with payment schedule: API to pay installments; acceptance: installment updated, receipts generated, milestone checks performed. 

    UC-04 Prepare Allotment Documents: triggered when 10% paid; acceptance: allotmentDocUri stored in plot_details. 

    UC-05 Prepare Allocation Documents: triggered when 50% paid; acceptance: allocationDocUri stored. 

    UC-06 Prepare Possession Documents: triggered when 75% paid; acceptance: possesionDocUri stored. 

    UC-07 Prepare Clearance Certificate Documents: triggered when 100% paid; acceptance: clearanceDocUri stored. 

    UC-03 Checkup with client about payment: scheduler and APIs for reminders and renegotiation; acceptance: failed_payment created after grace period. 

    UC-08 Case is Filed against Client: API to file case; acceptance: failed_payment updated with case details and plot marked on hold. 

    UC-10 Details Stored in Company Records: all submitted documents and purchaser details stored and retrievable. 

Nonfunctional Requirements 

    Security: role-based access, secure storage for sensitive docs. 

    Reliability: durable storage for payments and legal records. 

    Maintainability: modular Spring Boot services, clear DTOs. 

    Performance: acceptable for small-to-medium scale (single DB). 

Acceptance Criteria 

    All APIs return correct status codes and persist data as per schema. 

    Document issuance only occurs when required payment thresholds are met. 

    Failed payments and legal filings are auditable with timestamps and actor IDs. 

    Purchaser can view their payment schedule and receipts. 

Test Cases (representative) 

    TC-01: Submit plot application with required documents → expect 201 Created, plot and plot_details exist. 

    TC-02: Create payment schedule for plot → schedule entries persisted. 

    TC-03: Pay installment that completes 10% milestone → allotmentDocUri created and status updated. 

    TC-04: Simulate overdue installment beyond grace period → failed_payment created and service provider alerted. 

    TC-05: File case for failed payment → failed_payment updated with caseId and plot on hold. 

Constraints and Assumptions 

    Use cases, swimlane, and object diagram are authoritative. No additional entities or attributes will be introduced without explicit confirmation. 

    Payment gateway integration details are out of scope; payments are recorded via API calls with proof URIs. 

Object diagram entities and attributes exactly as listed: 

    Purchase (Pr): ID; Name; CNIC Number; Phone Number; balance; Image; Father Name 

    Place (Pr): Hassan Enterprises 

    Plot (Tr): ID; Plot Number; Area; Date of sale; Status; Location; Document ID; Date of Preparation; Document Type 

    Service Provider (Pr): ID; Name; CNIC Number; Phone Number; balance; Image 

    Payment Schedule (SbTr): Payment ID; Amount; Due Date; Status; Installment Number 

    Failed Payment (SbTr): Payment ID; Amount; Date; Status; Plot ID; Case ID; Court Date; Charge Code; Amount; Description 

    Payment Installment (SbLi): Installment ID; Amount; Due Date; Status; Date of Payment; Amount Paid; Balance 

    Plot Details (Li): ID; Name; Plot Number; Plot Map (Nakshah); Purchaser CNIC Copy; Purchaser Bank Statement; Company Form; Status; Document ID; Allotment Doc; Allocation Doc; Possesion Doc; Clearance Doc 

Do not invent new entities, attributes, or flows. If a required field or behavior is not specified, state it as a clarifying question in a single line at the end of your output rather than assuming a value. 

 

Class Diagram: 
 

Class Purchase { 

  Long id 

  String name 

  String cnicNumber 

  String phoneNumber 

  BigDecimal balance 

  String imageUri 

  String fatherName 

} 

 

Class Place { 

  Long id 

  String name   // value: "Hassan Enterprises" 

} 

 

Class ServiceProvider { 

  Long id 

  String name 

  String cnicNumber 

  String phoneNumber 

  BigDecimal balance 

  String imageUri 

} 

 

Class Plot { 

  Long id 

  String plotNumber 

  String area 

  LocalDate dateOfSale 

  String status 

  String location 

  String documentId 

  LocalDate dateOfPreparation 

  String documentType 

  Long purchaserId   // FK to Purchase 

  Long serviceProviderId // FK to ServiceProvider 

} 

 

Class PlotDetails { 

  Long id 

  String name 

  String plotNumber 

  String plotMapUri 

  String purchaserCnicCopyUri 

  String purchaserBankStatementUri 

  String companyFormUri 

  String status 

  String documentId 

  String allotmentDocUri 

  String allocationDocUri 

  String possesionDocUri 

  String clearanceDocUri 

  Long plotId  // FK to Plot 

} 

 

Class PaymentSchedule { 

  Long paymentId 

  BigDecimal amount 

  LocalDate dueDate 

  String status 

  Integer installmentNumber 

  Long plotId  // FK to Plot 

} 

 

Class PaymentInstallment { 

  Long installmentId 

  BigDecimal amount 

  LocalDate dueDate 

  String status 

  LocalDate dateOfPayment 

  BigDecimal amountPaid 

  BigDecimal balance 

  Long paymentScheduleId // FK to PaymentSchedule 

} 

 

Class FailedPayment { 

  Long paymentId 

  BigDecimal amount 

  LocalDate date 

  String status 

  Long plotId 

  String caseId 

  LocalDate courtDate 

  String chargeCode 

  BigDecimal amountCharged 

  String description 

} 
 
DB schema: 
 

CREATE TABLE place ( 

  id BIGSERIAL PRIMARY KEY, 

  name VARCHAR(255) NOT NULL 

); 

 

CREATE TABLE purchase ( 

  id BIGSERIAL PRIMARY KEY, 

  name VARCHAR(255) NOT NULL, 

  cnic_number VARCHAR(50) NOT NULL, 

  phone_number VARCHAR(50), 

  balance NUMERIC(18,2) DEFAULT 0, 

  image_uri VARCHAR(1024), 

  father_name VARCHAR(255) 

); 

 

CREATE TABLE service_provider ( 

  id BIGSERIAL PRIMARY KEY, 

  name VARCHAR(255) NOT NULL, 

  cnic_number VARCHAR(50) NOT NULL, 

  phone_number VARCHAR(50), 

  balance NUMERIC(18,2) DEFAULT 0, 

  image_uri VARCHAR(1024) 

); 

 

CREATE TABLE plot ( 

  id BIGSERIAL PRIMARY KEY, 

  plot_number VARCHAR(100) NOT NULL, 

  area VARCHAR(100), 

  date_of_sale DATE, 

  status VARCHAR(50), 

  location VARCHAR(255), 

  document_id VARCHAR(255), 

  date_of_preparation DATE, 

  document_type VARCHAR(100), 

  purchaser_id BIGINT REFERENCES purchase(id), 

  service_provider_id BIGINT REFERENCES service_provider(id) 

); 

 

CREATE TABLE plot_details ( 

  id BIGSERIAL PRIMARY KEY, 

  name VARCHAR(255), 

  plot_number VARCHAR(100), 

  plot_map_uri VARCHAR(1024), 

  purchaser_cnic_copy_uri VARCHAR(1024), 

  purchaser_bank_statement_uri VARCHAR(1024), 

  company_form_uri VARCHAR(1024), 

  status VARCHAR(50), 

  document_id VARCHAR(255), 

  allotment_doc_uri VARCHAR(1024), 

  allocation_doc_uri VARCHAR(1024), 

  possesion_doc_uri VARCHAR(1024), 

  clearance_doc_uri VARCHAR(1024), 

  plot_id BIGINT UNIQUE REFERENCES plot(id) 

); 

 

CREATE TABLE payment_schedule ( 

  payment_id BIGSERIAL PRIMARY KEY, 

  amount NUMERIC(18,2) NOT NULL, 

  due_date DATE, 

  status VARCHAR(50), 

  installment_number INTEGER, 

  plot_id BIGINT REFERENCES plot(id) 

); 

 

CREATE TABLE payment_installment ( 

  installment_id BIGSERIAL PRIMARY KEY, 

  amount NUMERIC(18,2) NOT NULL, 

  due_date DATE, 

  status VARCHAR(50), 

  date_of_payment DATE, 

  amount_paid NUMERIC(18,2), 

  balance NUMERIC(18,2), 

  payment_schedule_id BIGINT REFERENCES payment_schedule(payment_id) 

); 

 

CREATE TABLE failed_payment ( 

  payment_id BIGSERIAL PRIMARY KEY, 

  amount NUMERIC(18,2), 

  date DATE, 

  status VARCHAR(50), 

  plot_id BIGINT REFERENCES plot(id), 

  case_id VARCHAR(255), 

  court_date DATE, 

  charge_code VARCHAR(100), 

  amount_charged NUMERIC(18,2), 

  description TEXT 

); 