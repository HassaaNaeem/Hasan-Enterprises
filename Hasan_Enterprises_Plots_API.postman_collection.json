{
  "info": {
    "name": "Hasan Enterprises - Plot APIs",
    "description": "Collection for Plot Management APIs (GET/POST /api/plots, POST /api/plots/:id/apply, POST /api/plots/:id/documents)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register as Purchaser",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"purchaser@hasan.com\",\n  \"password\": \"Password123!\",\n  \"role\": \"purchaser\",\n  \"name\": \"Ahmed Khan\",\n  \"cnicNumber\": \"42101-1234567-1\",\n  \"phoneNumber\": \"03001234567\",\n  \"fatherName\": \"Ali Khan\"\n}"
            },
            "url": {
              "raw": "{{BASE_URL}}/api/auth/register",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "Login as Purchaser",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"purchaser@hasan.com\",\n  \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{BASE_URL}}/api/auth/login",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          }
        },
        {
          "name": "Register as Service Provider",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"provider@hasan.com\",\n  \"password\": \"Password123!\",\n  \"role\": \"service_provider\",\n  \"name\": \"Hassan Services\",\n  \"cnicNumber\": \"42101-9876543-1\",\n  \"phoneNumber\": \"03005678901\"\n}"
            },
            "url": {
              "raw": "{{BASE_URL}}/api/auth/register",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            }
          }
        },
        {
          "name": "Login as Service Provider",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"provider@hasan.com\",\n  \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{BASE_URL}}/api/auth/login",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Plots",
      "item": [
        {
          "name": "Create Plot (Service Provider)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{PURCHASER_TOKEN}}",
                "description": "Use Service Provider token instead"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"plotNumber\": \"P-001\",\n  \"area\": \"5 Marla\",\n  \"location\": \"Sector G-13, Islamabad\",\n  \"totalValue\": 2500000,\n  \"documentType\": \"Transfer Deed\"\n}"
            },
            "url": {
              "raw": "{{BASE_URL}}/api/plots",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "plots"
              ]
            },
            "description": "Create a new plot - Requires Service Provider or Admin role"
          }
        },
        {
          "name": "GET All Plots",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{PURCHASER_TOKEN}}"
              }
            ],
            "url": {
              "raw": "{{BASE_URL}}/api/plots?status=available&location=Islamabad&area=5 Marla",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "plots"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "available",
                  "description": "Filter by status: available, reserved, sold, on_hold"
                },
                {
                  "key": "location",
                  "value": "Islamabad",
                  "description": "Filter by location (case-insensitive)"
                },
                {
                  "key": "area",
                  "value": "5 Marla",
                  "description": "Filter by area"
                }
              ]
            },
            "description": "Get all plots with optional filters - Requires authentication"
          }
        },
        {
          "name": "GET Plot by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{PURCHASER_TOKEN}}"
              }
            ],
            "url": {
              "raw": "{{BASE_URL}}/api/plots/{{PLOT_ID}}",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "plots",
                "{{PLOT_ID}}"
              ]
            },
            "description": "Get specific plot details including plot details and documents"
          }
        },
        {
          "name": "POST Apply for Plot",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{PURCHASER_TOKEN}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{BASE_URL}}/api/plots/{{PLOT_ID}}/apply",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "plots",
                "{{PLOT_ID}}",
                "apply"
              ]
            },
            "description": "Apply for a plot - Changes plot status from available to reserved - Requires Purchaser role"
          }
        },
        {
          "name": "POST Upload Plot Documents",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{PURCHASER_TOKEN}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "plotMap",
                  "type": "file",
                  "src": [],
                  "description": "Plot map/layout document"
                },
                {
                  "key": "cnicCopy",
                  "type": "file",
                  "src": [],
                  "description": "Copy of CNIC"
                },
                {
                  "key": "bankStatement",
                  "type": "file",
                  "src": [],
                  "description": "Bank statement showing financial capability"
                },
                {
                  "key": "companyForm",
                  "type": "file",
                  "src": [],
                  "description": "Company registration form"
                }
              ]
            },
            "url": {
              "raw": "{{BASE_URL}}/api/plots/{{PLOT_ID}}/documents",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "plots",
                "{{PLOT_ID}}",
                "documents"
              ]
            },
            "description": "Upload required documents for the plot - Only purchaser who applied for the plot can upload - Accepted file types: PDF, DOC, DOCX, PNG, JPEG, GIF - Max file size: 10MB"
          }
        },
        {
          "name": "GET My Plots (Purchaser)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{PURCHASER_TOKEN}}"
              }
            ],
            "url": {
              "raw": "{{BASE_URL}}/api/plots/my-plots",
              "host": [
                "{{BASE_URL}}"
              ],
              "path": [
                "api",
                "plots",
                "my-plots"
              ]
            },
            "description": "Get all plots applied/purchased by the current purchaser"
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "BASE_URL",
      "value": "http://localhost:5000",
      "type": "string",
      "description": "Base URL for the API"
    },
    {
      "key": "PURCHASER_TOKEN",
      "value": "",
      "type": "string",
      "description": "JWT token for purchaser (get from login response)"
    },
    {
      "key": "SERVICE_PROVIDER_TOKEN",
      "value": "",
      "type": "string",
      "description": "JWT token for service provider (get from login response)"
    },
    {
      "key": "PLOT_ID",
      "value": "",
      "type": "string",
      "description": "MongoDB ObjectId of the plot (get from GET /api/plots)"
    }
  ]
}
